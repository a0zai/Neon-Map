<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="application-name" content="A0Z">
<meta name="author" content="system">
<meta name="generator" content="custom-static">
<meta name="classification" content="web-interface">
<meta name="subject" content="real-time interaction">
<title>A∞Z</title>
<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
<style>
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    background: #000;
    font-family: 'Courier New', monospace;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
}

#particles-js {
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    z-index:0;
    pointer-events:none;
}
#output { 
    opacity:1;
    transform: translateY(0);
    white-space: pre-wrap;
    z-index:10;
    color: #eaeaea;
    text-shadow: 0 0 8px rgba(255,255,255,0.7);
}
.line {
    margin-bottom:0.7em;
    opacity:0;
    transform: translateY(20px);
    transition: opacity 2s ease, transform 2s ease;
}
.line.visible {
    opacity:1;
    transform: translateY(0);
}

.glitch {
    font-weight:bold;
    letter-spacing:1px;
    color:#00ff00;
    text-shadow: 0 0 5px #00ff00, 0 0 10px #00ff00;
    animation: glitchAnim 0.12s steps(2, jump-end) infinite;
}
@keyframes glitchAnim {
    0% { transform:translate(1px,-1px); }
    50% { transform:translate(-2px,2px); }
    100% { transform:translate(1px,-1px); }
}

.shake {
    animation: shakeAnim 0.35s ease-in-out;
}
@keyframes shakeAnim {
    0% { transform:translateX(0); }
    20% { transform:translateX(-4px); }
    40% { transform:translateX(4px); }
    60% { transform:translateX(-3px); }
    80% { transform:translateX(3px); }
    100% { transform:translateX(0); }
}

/* Fade black at the end */
#fade-black {
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:#000;
    pointer-events:none;
    opacity:0;
    z-index:999;
    transition: opacity 3s ease;
}
</style>
</head>
<body>
<div id="particles-js"></div>
<div id="output"></div>
<div id="fade-black"></div>

<script>
/* ---- TYPEWRITER EFFECT ---- */
function typeLine(text, callback) {
    const container = document.getElementById("output");
    const line = document.createElement("div");
    line.className = "line";
    container.appendChild(line);

    setTimeout(() => line.classList.add('visible'), 50);

    let i = 0;
    function type() {
        if(i < text.length){
            line.textContent += text[i];
            i++;
            const jitter = Math.random() * 80;
            setTimeout(type, 180 + jitter);
        } else {
            if(callback) setTimeout(callback, 200);
        }
    }
    type();
}

/* ---- RANDOM GLITCH ---- */
function glitchFx() {
    const out = document.getElementById("output");
    const g = document.createElement("div");
    g.className = "line glitch";
    g.textContent = "!! SIGNAL DISTORTION DETECTED !!";
    out.appendChild(g);
    setTimeout(() => g.remove(), 500);
}

/* ---- MASTER SEQUENCE ---- */
function runSequence(lines, index=0) {
    if(index >= lines.length){
        const fade = document.getElementById("fade-black");
        fade.style.opacity = 1;

        fade.addEventListener("transitionend", () => {
            window.location.href = "index.html";
        }, { once: true });

        return;
    }

    typeLine(lines[index], () => {
        if(Math.random() < 0.22) glitchFx();
        if(lines[index].includes("FAILED") || lines[index].includes("Unknown")){
            const last = document.querySelector(".line:last-child");
            last.classList.add("shake");
        }
        runSequence(lines, index+1);
    });
}

/* ---- START ---- */
fetch("https://api.ipify.org?format=json")
  .then(r => r.json())
  .then(data => {
      const lines = [
      "You think you’re lost.",
      "You’re just offline."
      ];
      runSequence(lines);
  })
  .catch(() => {
      runSequence([
          "[ A∞Z / FAILURE ]",
          "Closing connection..."
      ]);
  });

/* ---- PARTICLES ---- */
particlesJS("particles-js", {
    particles: {
        number: { value:200, density:{ enable:true, value_area:1800 } },
        color: { value:"#7f3cff" },
        shape: { type:"circle" },
        opacity: { value:0.7, random:true },
        size: { value:1.5, random:true },
        line_linked: { enable:false },
        move: { enable:true, speed:0.5, random:true, straight:false, out_mode:"out" }
    },
    interactivity: {
        detect_on:"canvas",
        events:{ onhover:{ enable:false }, onclick:{ enable:false } }
    },
    retina_detect:true
});
</script>
</body>
</html>